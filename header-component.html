<div class="user-header">
    <!-- Lado izquierdo: Logo + Frase -->
    <div style="display: flex; align-items: center; gap: 0.75rem;">
        <img src="./Imagenes/LumiQuiz.png" alt="LumiQuiz Logo" style="height: 4.5rem; width: 4.5rem; object-fit: contain;">
        <div style="display: flex; flex-direction: column;">
            <span style="font-size: 1.125rem; font-weight: 500; color: #E0E1DD;">La forma m√°s divertida de estudiar</span>
            <span style="font-size: 1rem; font-weight: 700; color: #3B82F6; letter-spacing: 0.1em;">{{PANEL_TITLE}}</span>
        </div>
    </div>
    
    <!-- Lado derecho: Elementos ordenados de derecha a izquierda -->
    <div style="display: flex; align-items: center; gap: 0.75rem;">
        <!-- 1. Bot√≥n Soporte -->
        <button onclick="window.open('support-form.html?type=global', '_blank')" style="background: #059669; color: white; border: none; padding: 0.5rem; border-radius: 0.375rem; cursor: pointer; transition: background 0.2s; display: flex; align-items: center;" title="Soporte">
            üõ†Ô∏è
        </button>
        
        <!-- 2. Notificaciones -->
        <button onclick="window.open('tickets-list.html', '_blank')" style="background: #3B82F6; color: white; border: none; padding: 0.5rem; border-radius: 0.375rem; cursor: pointer; transition: background 0.2s; display: flex; align-items: center;" title="Notificaciones">
            üìß
        </button>
        
        <!-- 3. Icono luminarias -->
        <div style="display: flex; align-items: center; gap: 0.25rem;">
            <img src="Imagenes/1lum.png" alt="Luminarias" style="height: 1.25rem; width: 1.25rem; object-fit: contain;">
            <span id="user-luminarias" style="color: #FFD700; font-weight: bold; font-size: 0.875rem;">0</span>
        </div>
        
        <!-- 4. Selector de Rol -->
        <div style="position: relative;" id="role-selector-container">
            <button id="role-selector-btn" onclick="toggleRoleSelector()" style="background: #2E5266; color: #E0E1DD; border: 1px solid #415A77; padding: 0.5rem 0.75rem; border-radius: 0.375rem; font-size: 0.875rem; cursor: pointer; display: flex; align-items: center; gap: 0.5rem; transition: background 0.2s;" onmouseover="this.style.background='#415A77'" onmouseout="this.style.background='#2E5266'">
                <span id="current-role-name">{{USER_ROLE}}</span>
                <span style="font-size: 0.75rem;">‚ñº</span>
            </button>
            <div id="role-selector-dropdown" style="display: none; position: absolute; top: 100%; right: 0; margin-top: 0.25rem; background: #1B263B; border: 1px solid #415A77; border-radius: 0.375rem; box-shadow: 0 4px 8px rgba(0,0,0,0.3); z-index: 2001; min-width: 200px;">
                <div id="role-options" style="padding: 0.25rem 0;">
                    <!-- Las opciones de rol se cargan din√°micamente -->
                </div>
            </div>
        </div>
        
        <!-- 5. Nombre usuario -->
        <div style="text-align: right;">
            <div id="user-name" style="font-weight: bold; color: #E0E1DD; font-size: 0.875rem;">Cargando...</div>
            <div id="user-full-name" style="font-size: 0.75rem; color: #778DA9;">Cargando...</div>
        </div>
        
        <!-- 6. C√≠rculo azul con inicial y dropdown -->
        <div style="position: relative;">
            <button id="user-dropdown-btn" onclick="toggleUserDropdown()" style="width: 2.5rem; height: 2.5rem; background: #3B82F6; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; border: none; cursor: pointer; transition: background 0.2s;" title="Opciones de usuario">
                <span id="user-avatar">{{AVATAR_INITIAL}}</span>
            </button>
            <div id="user-dropdown" style="display: none; position: absolute; right: 0; top: 100%; margin-top: 0.5rem; width: 250px; background: #1B263B; border-radius: 0.5rem; box-shadow: 0 10px 25px rgba(0,0,0,0.3); border: 1px solid #415A77; z-index: 2000;">
                <div style="padding: 0.5rem 0;">
                    <a href="#" onclick="openPersonalDataModal(); closeUserDropdown(); return false;" style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; color: #E0E1DD; text-decoration: none; transition: background 0.2s;" onmouseover="this.style.background='#415A77'" onmouseout="this.style.background='transparent'">
                        <span style="font-size: 1rem;">üë§</span>
                        <span>Datos Personales</span>
                    </a>
                    <a href="#" onclick="openRoleModificationModal(); closeUserDropdown(); return false;" style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; color: #E0E1DD; text-decoration: none; transition: background 0.2s;" onmouseover="this.style.background='#415A77'" onmouseout="this.style.background='transparent'">
                        <span style="font-size: 1rem;">üé≠</span>
                        <span>Modificar Roles</span>
                    </a>
                    <div style="position: relative;">
                        <a href="#" onclick="toggleGameExplanationSubmenu(); return false;" style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; color: #E0E1DD; text-decoration: none; transition: background 0.2s;" onmouseover="this.style.background='#415A77'" onmouseout="this.style.background='transparent'">
                            <span style="font-size: 1rem;">üéÆ</span>
                            <span>Explicaci√≥n del Juego</span>
                            <span style="margin-left: auto;">‚ñ∂</span>
                        </a>
                        <div id="game-explanation-submenu" style="display: none; background: #0D1B2A; border-radius: 0.375rem; margin: 0.25rem; border: 1px solid #415A77;">
                            <a href="#" onclick="openIntroductionModal(); closeUserDropdown(); return false;" style="display: block; padding: 0.5rem 1rem; color: #E0E1DD; text-decoration: none; font-size: 0.875rem;" onmouseover="this.style.background='#415A77'" onmouseout="this.style.background='transparent'">Introducci√≥n</a>
                            <a href="#" onclick="openGameModesModal(); closeUserDropdown(); return false;" style="display: block; padding: 0.5rem 1rem; color: #E0E1DD; text-decoration: none; font-size: 0.875rem;" onmouseover="this.style.background='#415A77'" onmouseout="this.style.background='transparent'">Modalidades de Juego</a>
                            <a href="#" onclick="openRoleLevelsModal(); closeUserDropdown(); return false;" style="display: block; padding: 0.5rem 1rem; color: #E0E1DD; text-decoration: none; font-size: 0.875rem;" onmouseover="this.style.background='#415A77'" onmouseout="this.style.background='transparent'">Niveles por Roles</a>
                            <a href="#" onclick="openTopicDevelopmentModal(); closeUserDropdown(); return false;" style="display: block; padding: 0.5rem 1rem; color: #E0E1DD; text-decoration: none; font-size: 0.875rem;" onmouseover="this.style.background='#415A77'" onmouseout="this.style.background='transparent'">Desarrollo de Temarios</a>
                            <a href="#" onclick="openLuminariasModal(); closeUserDropdown(); return false;" style="display: block; padding: 0.5rem 1rem; color: #E0E1DD; text-decoration: none; font-size: 0.875rem;" onmouseover="this.style.background='#415A77'" onmouseout="this.style.background='transparent'">Luminarias</a>
                        </div>
                    </div>
                    <a href="#" onclick="openPasswordChangeModal(); closeUserDropdown(); return false;" style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; color: #E0E1DD; text-decoration: none; transition: background 0.2s;" onmouseover="this.style.background='#415A77'" onmouseout="this.style.background='transparent'">
                        <span style="font-size: 1rem;">üîê</span>
                        <span>Cambio de Contrase√±a</span>
                    </a>
                    <div style="border-top: 1px solid #415A77; margin: 0.5rem 0;"></div>
                    <a href="#" onclick="logout(); closeUserDropdown(); return false;" style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; color: #DC2626; text-decoration: none; transition: background 0.2s;" onmouseover="this.style.background='rgba(220, 38, 38, 0.1)'" onmouseout="this.style.background='transparent'">
                        <span style="font-size: 1rem;">üö™</span>
                        <span>Cerrar Sesi√≥n</span>
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
